!function(){"use strict";var e,t,n='"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace',r="\n  .codeflask {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  .codeflask, .codeflask * {\n    box-sizing: border-box;\n  }\n\n  .codeflask__pre {\n    pointer-events: none;\n    z-index: 3;\n    overflow: hidden;\n  }\n\n  .codeflask__textarea {\n    background: none;\n    border: none;\n    color: "+(e="caret-color",t="#000",("undefined"!=typeof CSS?CSS.supports(e,t):"undefined"!=typeof document&&function(e){return(e=e.split("-").filter(function(e){return!!e}).map(function(e){return e[0].toUpperCase()+e.substr(1)}).join(""))[0].toLowerCase()+e.substr(1)}(e)in document.body.style)?"#fff":"#ccc")+";\n    z-index: 1;\n    resize: none;\n    font-family: "+n+";\n    -webkit-appearance: pre;\n    caret-color: #111;\n    z-index: 2;\n    width: 100%;\n    height: 100%;\n  }\n\n  .codeflask--has-line-numbers .codeflask__textarea {\n    width: calc(100% - 40px);\n  }\n\n  .codeflask__code {\n    display: block;\n    font-family: "+n+";\n    overflow: hidden;\n  }\n\n  .codeflask__flatten {\n    padding: 10px;\n    font-size: 13px;\n    line-height: 20px;\n    white-space: pre;\n    position: absolute;\n    top: 0;\n    left: 0;\n    overflow: auto;\n    margin: 0 !important;\n    outline: none;\n    text-align: left;\n  }\n\n  .codeflask--has-line-numbers .codeflask__flatten {\n    width: calc(100% - 40px);\n    left: 40px;\n  }\n\n  .codeflask__line-highlight {\n    position: absolute;\n    top: 10px;\n    left: 0;\n    width: 100%;\n    height: 20px;\n    background: rgba(0,0,0,0.1);\n    z-index: 1;\n  }\n\n  .codeflask__lines {\n    padding: 10px 4px;\n    font-size: 12px;\n    line-height: 20px;\n    font-family: 'Cousine', monospace;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 40px;\n    height: 100%;\n    text-align: right;\n    color: #999;\n    z-index: 2;\n  }\n\n  .codeflask__lines__line {\n    display: block;\n  }\n\n  .codeflask.codeflask--has-line-numbers {\n    padding-left: 40px;\n  }\n\n  .codeflask.codeflask--has-line-numbers:before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 40px;\n    height: 100%;\n    background: #eee;\n    z-index: 1;\n  }\n";function o(e,t,n){var r=t||"codeflask-style",o=n||document.head;if(!e)return!1;if(document.getElementById(r))return!0;var i=document.createElement("style");return i.innerHTML=e,i.id=r,o.appendChild(i),!0}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function a(e){return String(e).replace(/[&<>"'`=/]/g,function(e){return i[e]})}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var l=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,n=0,r={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof o?new o(e.type,r.util.encode(e.content),e.alias):Array.isArray(e)?e.map(r.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,i,a=r.util.type(t);switch(n=n||{},a){case"Object":if(i=r.util.objId(t),n[i])return n[i];for(var s in o={},n[i]=o,t)t.hasOwnProperty(s)&&(o[s]=e(t[s],n));return o;case"Array":return i=r.util.objId(t),n[i]?n[i]:(o=[],n[i]=o,t.forEach(function(t,r){o[r]=e(t,n)}),o);default:return t}}},languages:{extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var i=(o=o||r.languages)[e],a={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=i[s])}var c=o[e];return o[e]=a,r.languages.DFS(r.languages,function(t,n){n===c&&t!=e&&(this[t]=a)}),a},DFS:function e(t,n,o,i){i=i||{};var a=r.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],o||s);var l=t[s],c=r.util.type(l);"Object"!==c||i[a(l)]?"Array"!==c||i[a(l)]||(i[a(l)]=!0,e(l,n,s,i)):(i[a(l)]=!0,e(l,n,null,i))}}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",o);for(var i,a=o.elements||e.querySelectorAll(o.selector),s=0;i=a[s++];)r.highlightElement(i,!0===t,o.callback)},highlightElement:function(n,o,i){for(var a,s,l=n;l&&!t.test(l.className);)l=l.parentNode;l&&(a=(l.className.match(t)||[,""])[1].toLowerCase(),s=r.languages[a]),n.className=n.className.replace(t,"").replace(/\s+/g," ")+" language-"+a,n.parentNode&&(l=n.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+a));var c={element:n,language:a,grammar:s,code:n.textContent},u=function(e){c.highlightedCode=e,r.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,r.hooks.run("after-highlight",c),r.hooks.run("complete",c),i&&i.call(c.element)};if(r.hooks.run("before-sanity-check",c),c.code)if(r.hooks.run("before-highlight",c),c.grammar)if(o&&e.Worker){var d=new Worker(r.filename);d.onmessage=function(e){u(e.data)},d.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else u(r.highlight(c.code,c.grammar,c.language));else u(r.util.encode(c.code));else r.hooks.run("complete",c)},highlight:function(e,t,n){var i={code:e,grammar:t,language:n};return r.hooks.run("before-tokenize",i),i.tokens=r.tokenize(i.code,i.grammar),r.hooks.run("after-tokenize",i),o.stringify(r.util.encode(i.tokens),i.language)},matchGrammar:function(e,t,n,i,a,s,l){for(var c in n)if(n.hasOwnProperty(c)&&n[c]){if(c==l)return;var u=n[c];u="Array"===r.util.type(u)?u:[u];for(var d=0;d<u.length;++d){var p=u[d],h=p.inside,f=!!p.lookbehind,g=!!p.greedy,m=0,y=p.alias;if(g&&!p.pattern.global){var b=p.pattern.toString().match(/[imuy]*$/)[0];p.pattern=RegExp(p.pattern.source,b+"g")}p=p.pattern||p;for(var v=i,w=a;v<t.length;w+=t[v].length,++v){var k=t[v];if(t.length>e.length)return;if(!(k instanceof o)){if(g&&v!=t.length-1){if(p.lastIndex=w,!(A=p.exec(e)))break;for(var _=A.index+(f?A[1].length:0),x=A.index+A[0].length,S=v,E=w,$=t.length;S<$&&(E<x||!t[S].type&&!t[S-1].greedy);++S)_>=(E+=t[S].length)&&(++v,w=E);if(t[v]instanceof o)continue;C=S-v,k=e.slice(w,E),A.index-=w}else{p.lastIndex=0;var A=p.exec(k),C=1}if(A){f&&(m=A[1]?A[1].length:0),x=(_=A.index+m)+(A=A[0].slice(m)).length;var P=k.slice(0,_),T=k.slice(x),N=[v,C];P&&(++v,w+=P.length,N.push(P));var F=new o(c,h?r.tokenize(A,h):A,y,A,g);if(N.push(F),T&&N.push(T),Array.prototype.splice.apply(t,N),1!=C&&r.matchGrammar(e,t,n,v,w,!0,c),s)break}else if(s)break}}}}},tokenize:function(e,t){var n=[e],o=t.rest;if(o){for(var i in o)t[i]=o[i];delete t.rest}return r.matchGrammar(e,n,t,0,0,!1),n},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var o,i=0;o=n[i++];)o(t)}},Token:o};function o(e,t,n,r,o){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length,this.greedy=!!o}if(e.Prism=r,o.stringify=function(e,t,n){if("string"==typeof e)return e;if(Array.isArray(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var i={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if(e.alias){var a=Array.isArray(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,a)}r.hooks.run("wrap",i);var s=Object.keys(i.attributes).map(function(e){return e+'="'+(i.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+(s?" "+s:"")+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(r.disableWorkerMessageHandler||e.addEventListener("message",function(t){var n=JSON.parse(t.data),o=n.language,i=n.code,a=n.immediateClose;e.postMessage(r.highlight(i,r.languages[o],o)),a&&e.close()},!1),r):r;var i=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return i&&(r.filename=i.src,r.manual||i.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(r.highlightAll):window.setTimeout(r.highlightAll,16):document.addEventListener("DOMContentLoaded",r.highlightAll))),r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=t),void 0!==s&&(s.Prism=t),t.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(e,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};o["language-"+n]={pattern:/[\s\S]+/,inside:t.languages[n]};var i={};i[e]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,e),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",i)}}),t.languages.xml=t.languages.extend("markup",{}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?[\s\S]*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:RegExp("url\\((?:"+t.source+"|.*?)\\)","i"),selector:RegExp("[^{}\\s](?:[^{};\"']|"+t.source+")*?(?=\\s*\\{)"),string:{pattern:t,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:e.languages.css}},alias:"language-css"}},n.tag))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+)n?|\d+n|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}}}),t.languages.markup&&t.languages.markup.tag.addInlined("script","javascript"),t.languages.js=t.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(e){e=e||document;var n={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(e.querySelectorAll("pre[data-src]")).forEach(function(e){if(!e.hasAttribute("data-src-loaded")){for(var r,o=e.getAttribute("data-src"),i=e,a=/\blang(?:uage)?-([\w-]+)\b/i;i&&!a.test(i.className);)i=i.parentNode;if(i&&(r=(e.className.match(a)||[,""])[1]),!r){var s=(o.match(/\.(\w+)$/)||[,""])[1];r=n[s]||s}var l=document.createElement("code");l.className="language-"+r,e.textContent="",l.textContent="Loading…",e.appendChild(l);var c=new XMLHttpRequest;c.open("GET",o,!0),c.onreadystatechange=function(){4==c.readyState&&(c.status<400&&c.responseText?(l.textContent=c.responseText,t.highlightElement(l),e.setAttribute("data-src-loaded","")):c.status>=400?l.textContent="✖ Error "+c.status+" while fetching file: "+c.statusText:l.textContent="✖ Error: File does not exist or is empty")},c.send(null)}}),t.plugins.toolbar&&t.plugins.toolbar.registerButton("download-file",function(e){var t=e.element.parentNode;if(t&&/pre/i.test(t.nodeName)&&t.hasAttribute("data-src")&&t.hasAttribute("data-download-link")){var n=t.getAttribute("data-src"),r=document.createElement("a");return r.textContent=t.getAttribute("data-download-link-label")||"Download",r.setAttribute("download",""),r.href=n,r}})},document.addEventListener("DOMContentLoaded",function(){self.Prism.fileHighlight()}))}),c=function(e,t){if(!e)throw Error("CodeFlask expects a parameter which is Element or a String selector");if(!t)throw Error("CodeFlask expects an object containing options as second parameter");if(e.nodeType)this.editorRoot=e;else{var n=document.querySelector(e);n&&(this.editorRoot=n)}this.opts=t,this.startEditor()};c.prototype.startEditor=function(){if(!o(r,null,this.opts.styleParent))throw Error("Failed to inject CodeFlask CSS.");this.createWrapper(),this.createTextarea(),this.createPre(),this.createCode(),this.runOptions(),this.listenTextarea(),this.populateDefault(),this.updateCode(this.code)},c.prototype.createWrapper=function(){this.code=this.editorRoot.innerHTML,this.editorRoot.innerHTML="",this.elWrapper=this.createElement("div",this.editorRoot),this.elWrapper.classList.add("codeflask")},c.prototype.createTextarea=function(){this.elTextarea=this.createElement("textarea",this.elWrapper),this.elTextarea.classList.add("codeflask__textarea","codeflask__flatten")},c.prototype.createPre=function(){this.elPre=this.createElement("pre",this.elWrapper),this.elPre.classList.add("codeflask__pre","codeflask__flatten")},c.prototype.createCode=function(){this.elCode=this.createElement("code",this.elPre),this.elCode.classList.add("codeflask__code","language-"+(this.opts.language||"html"))},c.prototype.createLineNumbers=function(){this.elLineNumbers=this.createElement("div",this.elWrapper),this.elLineNumbers.classList.add("codeflask__lines"),this.setLineNumber()},c.prototype.createElement=function(e,t){var n=document.createElement(e);return t.appendChild(n),n},c.prototype.runOptions=function(){this.opts.rtl=this.opts.rtl||!1,this.opts.tabSize=this.opts.tabSize||2,this.opts.enableAutocorrect=this.opts.enableAutocorrect||!1,this.opts.lineNumbers=this.opts.lineNumbers||!1,this.opts.defaultTheme=!1!==this.opts.defaultTheme,this.opts.areaId=this.opts.areaId||null,this.opts.ariaLabelledby=this.opts.ariaLabelledby||null,this.opts.readonly=this.opts.readonly||null,"boolean"!=typeof this.opts.handleTabs&&(this.opts.handleTabs=!0),"boolean"!=typeof this.opts.handleSelfClosingCharacters&&(this.opts.handleSelfClosingCharacters=!0),"boolean"!=typeof this.opts.handleNewLineIndentation&&(this.opts.handleNewLineIndentation=!0),!0===this.opts.rtl&&(this.elTextarea.setAttribute("dir","rtl"),this.elPre.setAttribute("dir","rtl")),!1===this.opts.enableAutocorrect&&(this.elTextarea.setAttribute("spellcheck","false"),this.elTextarea.setAttribute("autocapitalize","off"),this.elTextarea.setAttribute("autocomplete","off"),this.elTextarea.setAttribute("autocorrect","off")),this.opts.lineNumbers&&(this.elWrapper.classList.add("codeflask--has-line-numbers"),this.createLineNumbers()),this.opts.defaultTheme&&o("\n.codeflask {\n  background: #fff;\n  color: #4f559c;\n}\n\n.codeflask .token.punctuation {\n  color: #4a4a4a;\n}\n\n.codeflask .token.keyword {\n  color: #8500ff;\n}\n\n.codeflask .token.operator {\n  color: #ff5598;\n}\n\n.codeflask .token.string {\n  color: #41ad8f;\n}\n\n.codeflask .token.comment {\n  color: #9badb7;\n}\n\n.codeflask .token.function {\n  color: #8500ff;\n}\n\n.codeflask .token.boolean {\n  color: #8500ff;\n}\n\n.codeflask .token.number {\n  color: #8500ff;\n}\n\n.codeflask .token.selector {\n  color: #8500ff;\n}\n\n.codeflask .token.property {\n  color: #8500ff;\n}\n\n.codeflask .token.tag {\n  color: #8500ff;\n}\n\n.codeflask .token.attr-value {\n  color: #8500ff;\n}\n","theme-default",this.opts.styleParent),this.opts.areaId&&this.elTextarea.setAttribute("id",this.opts.areaId),this.opts.ariaLabelledby&&this.elTextarea.setAttribute("aria-labelledby",this.opts.ariaLabelledby),this.opts.readonly&&this.enableReadonlyMode()},c.prototype.updateLineNumbersCount=function(){for(var e="",t=1;t<=this.lineNumber;t++)e=e+'<span class="codeflask__lines__line">'+t+"</span>";this.elLineNumbers.innerHTML=e},c.prototype.listenTextarea=function(){var e=this;this.elTextarea.addEventListener("input",function(t){e.code=t.target.value,e.elCode.innerHTML=a(t.target.value),e.highlight(),setTimeout(function(){e.runUpdate(),e.setLineNumber()},1)}),this.elTextarea.addEventListener("keydown",function(t){e.handleTabs(t),e.handleSelfClosingCharacters(t),e.handleNewLineIndentation(t)}),this.elTextarea.addEventListener("scroll",function(t){e.elPre.style.transform="translate3d(-"+t.target.scrollLeft+"px, -"+t.target.scrollTop+"px, 0)",e.elLineNumbers&&(e.elLineNumbers.style.transform="translate3d(0, -"+t.target.scrollTop+"px, 0)")})},c.prototype.handleTabs=function(e){if(this.opts.handleTabs){if(9!==e.keyCode)return;e.preventDefault();var t=this.elTextarea,n=t.selectionDirection,r=t.selectionStart,o=t.selectionEnd,i=t.value,a=i.substr(0,r),s=i.substring(r,o),l=i.substring(o),c=" ".repeat(this.opts.tabSize);if(r!==o&&s.length>=c.length){var u=r-a.split("\n").pop().length,d=c.length,p=c.length;e.shiftKey?(i.substr(u,c.length)===c?(d=-d,u>r?(s=s.substring(0,u)+s.substring(u+c.length),p=0):u===r?(d=0,p=0,s=s.substring(c.length)):(p=-p,a=a.substring(0,u)+a.substring(u+c.length))):(d=0,p=0),s=s.replace(new RegExp("\n"+c.split("").join("\\"),"g"),"\n")):(a=a.substr(0,u)+c+a.substring(u,r),s=s.replace(/\n/g,"\n"+c)),t.value=a+s+l,t.selectionStart=r+d,t.selectionEnd=r+s.length+p,t.selectionDirection=n}else t.value=a+c+l,t.selectionStart=r+c.length,t.selectionEnd=r+c.length;var h=t.value;this.updateCode(h),this.elTextarea.selectionEnd=o+this.opts.tabSize}},c.prototype.handleSelfClosingCharacters=function(e){if(this.opts.handleSelfClosingCharacters){var t=e.key;if(["(","[","{","<","'",'"'].includes(t)||[")","]","}",">","'",'"'].includes(t))switch(t){case"(":case")":this.closeCharacter(t);break;case"[":case"]":this.closeCharacter(t);break;case"{":case"}":this.closeCharacter(t);break;case"<":case">":case"'":case'"':this.closeCharacter(t)}}},c.prototype.setLineNumber=function(){this.lineNumber=this.code.split("\n").length,this.opts.lineNumbers&&this.updateLineNumbersCount()},c.prototype.handleNewLineIndentation=function(e){if(this.opts.handleNewLineIndentation&&13===e.keyCode){e.preventDefault();var t=this.elTextarea,n=t.selectionStart,r=t.selectionEnd,o=t.value,i=o.substr(0,n),a=o.substring(r),s=o.lastIndexOf("\n",n-1),l=s+o.slice(s+1).search(/[^ ]|$/),c=l>s?l-s:0,u=i+"\n"+" ".repeat(c)+a;t.value=u,t.selectionStart=n+c+1,t.selectionEnd=n+c+1,this.updateCode(t.value)}},c.prototype.closeCharacter=function(e){var t=this.elTextarea.selectionStart,n=this.elTextarea.selectionEnd;if(this.skipCloseChar(e)){var r=this.code.substr(n,1)===e,o=r?n+1:n,i=!r&&["'",'"'].includes(e)?e:"",a=""+this.code.substring(0,t)+i+this.code.substring(o);this.updateCode(a),this.elTextarea.selectionEnd=++this.elTextarea.selectionStart}else{var s=e;switch(e){case"(":s=String.fromCharCode(e.charCodeAt()+1);break;case"<":case"{":case"[":s=String.fromCharCode(e.charCodeAt()+2)}var l=this.code.substring(t,n),c=""+this.code.substring(0,t)+l+s+this.code.substring(n);this.updateCode(c)}this.elTextarea.selectionEnd=t},c.prototype.skipCloseChar=function(e){var t=this.elTextarea.selectionStart,n=this.elTextarea.selectionEnd,r=Math.abs(n-t)>0;return[")","}","]",">"].includes(e)||["'",'"'].includes(e)&&!r},c.prototype.updateCode=function(e){this.code=e,this.elTextarea.value=e,this.elCode.innerHTML=a(e),this.highlight(),this.setLineNumber(),setTimeout(this.runUpdate.bind(this),1)},c.prototype.updateLanguage=function(e){var t=this.opts.language;this.elCode.classList.remove("language-"+t),this.elCode.classList.add("language-"+e),this.opts.language=e,this.highlight()},c.prototype.addLanguage=function(e,t){l.languages[e]=t},c.prototype.populateDefault=function(){this.updateCode(this.code)},c.prototype.highlight=function(){l.highlightElement(this.elCode,!1)},c.prototype.onUpdate=function(e){if(e&&"[object Function]"!=={}.toString.call(e))throw Error("CodeFlask expects callback of type Function");this.updateCallBack=e},c.prototype.getCode=function(){return this.code},c.prototype.runUpdate=function(){this.updateCallBack&&this.updateCallBack(this.code)},c.prototype.enableReadonlyMode=function(){this.elTextarea.setAttribute("readonly",!0)},c.prototype.disableReadonlyMode=function(){this.elTextarea.removeAttribute("readonly")};function u(e){if("string"!=typeof e)throw new TypeError("first argument to 'hslStringToHslTuple' must be of type 'string'!");const t=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(","),n=parseInt(t[0]),r=t[1].trim(),o=t[2].trim();if(isNaN(n))throw new TypeError(`Couldn't decode the 'hue' value for the given hsl color: ${e}`);if(isNaN(parseInt(r)))throw new TypeError(`Couldn't decode the 'saturation' value for the given hsl color: ${e}`);if(isNaN(parseInt(o)))throw new TypeError(`Couldn't decode the 'lightness' value for the given hsl color: ${e}`);return[n,"%"!==r.slice(r.length-1)?`${r}%`:r,"%"!==o.slice(o.length-1)?`${o}%`:o]}function d([e,t,n]){return`rgb(${e}, ${t}, ${n})`}function p(e){if("string"!=typeof e)throw new TypeError("first argument must be of type 'string'!");const t=e.match(/rgb\((.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(null==t)throw new TypeError(`'rgbToHex()' couldn't decode an RGB color from the given input: ${e}`);const n=parseFloat(t[1]),r=parseFloat(t[2]),o=parseFloat(t[3]);if(isNaN(n))throw new TypeError(`'rgbToString()' couldn't decode the 'red' value of the given RGB color: '${e}'.`);if(isNaN(r))throw new TypeError(`'rgbToString()' couldn't decode the 'green' value of the given RGB color: '${e}'.`);if(isNaN(o))throw new TypeError(`'rgbToString()' couldn't decode the 'blue' value of the given RGB color: '${e}'.`);return[n,r,o]}customElements.define("code-flask",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML+="<style> :host { display: block; position: relative;\n\t\t\t\toverflow-x: auto; min-height: 100px; }\n\t\t\t.codeflask .token.title { color: var(--codeflask-title, #000) }\n\t\t\t.codeflask .token.punctuation { color: var(--codeflask-punctuation, #6a6a6a) }\n\t\t\t.codeflask .token.keyword { color: var(--codeflask-keyword, #8500ff) }\n\t\t\t.codeflask .token.operator { color: var(--codeflask-operator, #ff5598) }\n\t\t\t.codeflask .token.string { color: var(--codeflask-string, #41ad8f) }\n\t\t\t.codeflask .token.comment { color: var(--codeflask-comment, #9badb7) }\n\t\t\t.codeflask .token.function { color: var(--codeflask-function, #8500ff) }\n\t\t\t.codeflask .token.boolean { color: var(--codeflask-boolean, #8500ff) }\n\t\t\t.codeflask .token.number { color: var(--codeflask-number, #8500ff) }\n\t\t\t.codeflask .token.selector { color: var(--codeflask-selector, #8500ff) }\n\t\t\t.codeflask .token.property { color: var(--codeflask-property, #8500ff) }\n\t\t\t.codeflask .token.tag { color: var(--codeflask-tag, #8500ff) }\n\t\t\t.codeflask .token.attr-value { color: var(--codeflask-attr-value, #8500ff) }\n\t\t\t.codeflask .token.url { color: var(--codeflask-url, #4040ff) }\n\t\t\t.codeflask .token.italic { font-style: italic }\n\t\t\t.codeflask .token.bold { font-weight: bolder }\n\t\t</style>",this.editorElement=document.createElement("div"),this.editorElement.style.width="100%",this.editorElement.style.height="100%",this.editorElement.style.position="absolute",this.shadowRoot.appendChild(this.editorElement),this.flask=new c(this.editorElement,{language:this.getAttribute("language")||"markup",wordWrap:this.hasAttribute("word-wrap"),lineNumbers:this.lineNumbers,rtl:"rtl"===this.dir,defaultTheme:!1,styleParent:this.shadowRoot}),this.flask.onUpdate(e=>{this.dispatchEvent(new CustomEvent("value-changed"))}),this.value=this.getAttribute("value"),this.value||(this.initElement=document.createElement("div"),this.shadowRoot.appendChild(this.initElement),this.initSlot=document.createElement("slot"),this.initElement.appendChild(this.initSlot))}connectedCallback(){if(this.initSlot){let e="";for(const t of this.initSlot.assignedNodes())e+=t.outerHTML||t.textContent;this.initElement.removeChild(this.initSlot),this.shadowRoot.removeChild(this.initElement),e.length>0&&(this.value=e)}}get value(){return this.flask.getCode()}set value(e){return this.removeAttribute("value"),this.flask.updateCode(e)}get language(){return this.flask.opts.language}set language(e){e&&(this.flask.updateLanguage(e),this.dispatchEvent(new CustomEvent("language-changed")))}get dir(){return this.getAttribute("dir")||"ltr"}get lineNumbers(){return this.hasAttribute("line-numbers")}static get observedAttributes(){return["language","value"]}attributeChangedCallback(e,t,n){this[e]=n}}),function(e){function t(e,t){return e=e.replace(/<inner>/g,"(?:\\\\.|[^\\\\\\n\r]|(?:\r?\n|\r)(?!\r?\n|\r))"),t&&(e=e+"|"+e.replace(/_/g,"\\*")),RegExp("((?:^|[^\\\\])(?:\\\\{2})*)(?:"+e+")")}var n="(?:\\\\.|``.+?``|`[^`\r\\n]+`|[^\\\\|\r\\n`])+",r="\\|?__(?:\\|__)+\\|?(?:(?:\r?\n|\r)|$)".replace(/__/g,n),o="\\|?[ \t]*:?-{3,}:?[ \t]*(?:\\|[ \t]*:?-{3,}:?[ \t]*)+\\|?(?:\r?\n|\r)";e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+r+o+"(?:"+r+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+r+o+")(?:"+r+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+r+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+r+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/(^[ \t]*(?:\r?\n|\r))(?: {4}|\t).+(?:(?:\r?\n|\r)(?: {4}|\t).+)*/m,lookbehind:!0,alias:"keyword"},{pattern:/``.+?``|`[^`\r\n]+`/,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\r?\n|\r))[\s\S]+?(?=(?:\r?\n|\r)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\r?\n|\r)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#+.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:t("__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__",!0),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:t("_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_",!0),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:t("(~~?)(?:(?!~)<inner>)+?\\2",!1),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},url:{pattern:t('!?\\[(?:(?!\\])<inner>)+\\](?:\\([^\\s)]+(?:[\t ]+"(?:\\\\.|[^"\\\\])*")?\\)| ?\\[(?:(?!\\])<inner>)+\\])',!1),lookbehind:!0,greedy:!0,inside:{variable:{pattern:/(\[)[^\]]+(?=\]$)/,lookbehind:!0},content:{pattern:/(^!?\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},string:{pattern:/"(?:\\.|[^"\\])*"(?=\)$)/}}}}),["url","bold","italic","strike"].forEach(function(t){["url","bold","italic","strike"].forEach(function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])})}),e.hooks.add("after-tokenize",function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!=typeof t)for(var n=0,r=t.length;n<r;n++){var o=t[n];if("code"===o.type){var i=o.content[1],a=o.content[3];if(i&&a&&"code-language"===i.type&&"code-block"===a.type&&"string"==typeof i.content){var s="language-"+i.content.trim().split(/\s+/)[0].toLowerCase();a.alias?"string"==typeof a.alias?a.alias=[a.alias,s]:a.alias.push(s):a.alias=[s]}}else e(o.content)}}(e.tokens)}),e.hooks.add("wrap",function(t){if("code-block"===t.type){for(var n="",r=0,o=t.classes.length;r<o;r++){var i=t.classes[r],a=/language-(.+)/.exec(i);if(a){n=a[1];break}}var s=e.languages[n];if(s){var l=t.content.replace(/&lt;/g,"<").replace(/&amp;/g,"&");t.content=e.highlight(l,s,n)}else if(n&&"none"!==n&&e.plugins.autoloader){var c="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=c,e.plugins.autoloader.loadLanguages(n,function(){var t=document.getElementById(c);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))})}}}),e.languages.md=e.languages.markdown}(Prism),Prism.languages.json={property:{pattern:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,number:/-?\d+\.?\d*(e[+-]?\d+)?/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};const h=255;const f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function g(e,t=!0){return function([e,t,n],r=!0){const o=e,i=parseFloat(t)/100,a=parseFloat(n)/100;let s=0,l=0,c=0;if(0===i)return s=l=c=a*h,r?[Math.round(s),Math.round(l),Math.round(c)]:[s,l,c];const u=a<.5?a*(1+i):a+i-a*i,d=2*a-u,p=o/360;let f=p+1/3,g=p,m=p-1/3;f<0?++f:f>1&&--f;g<0?++g:g>1&&--g;m<0?++m:m>1&&--m;s=6*f<1?d+6*(u-d)*f:2*f<1?u:3*f<2?d+(u-d)*(2/3-f)*6:d;l=6*g<1?d+6*(u-d)*g:2*g<1?u:3*g<2?d+(u-d)*(2/3-g)*6:d;c=6*m<1?d+6*(u-d)*m:2*m<1?u:3*m<2?d+(u-d)*(2/3-m)*6:d;return r?[Math.round(s*h),Math.round(l*h),Math.round(c*h)]:[s*h,l*h,c*h]}(u(e),t)}function m(e,t=!0){return d(g(e,t))}function y(e){const[t,n,r]=g(e),[,,,o]=function(e){if("string"!=typeof e)throw new TypeError("first argument to 'hslaStringToHslaTuple' must be of type 'string'!");const[t,n,r]=u(e),o=e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).split(","),i=parseFloat(o[o.length-1]);if(isNaN(i))throw new TypeError(`Couldn't decode the 'alpha' value for the given hsla color: ${e}`);return[t,"%"!==n.slice(n.length-1)?`${n}%`:n,"%"!==r.slice(r.length-1)?`${r}%`:r,i]}(e);return[t,n,r,o]}function b(e){const[t,n,r]=p(e);return o=(t<<16|n<<8|r).toString(16).toLowerCase(),`#${new Array(7-o.length).join("0")+o}`;var o}function v(e,t){if(null!=t&&"string"!=typeof t)throw new TypeError("argument 'againstColor' must be of type 'string'!");const[n,r,o,i]=function(e){if("string"!=typeof e)throw new TypeError("first argument must be of type 'string'!");const t=e.match(/rgba\((.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(null==t)throw new TypeError(`Couldn't decode an RGBa color from the given input: ${e}`);const n=parseFloat(t[1]),r=parseFloat(t[2]),o=parseFloat(t[3]),i=parseFloat(t[4]);if(isNaN(n))throw new TypeError(`Couldn't decode the 'red' value of the given RGBa color: '${e}'.`);if(isNaN(r))throw new TypeError(`Couldn't decode the 'green' value of the given RGBa color: '${e}'.`);if(isNaN(o))throw new TypeError(`Couldn't decode the 'blue' value of the given RGBa color: '${e}'.`);if(isNaN(i))throw new TypeError(`Couldn't decode the 'alpha' value of the given RGBa color: '${e}'.`);return[n,r,o,i]}(e);if(null!=t){const[e,a,s]=p(function(e){if("string"!=typeof e)throw new TypeError("first argument to 'toRgb()' must be a string!");if("#"===e[0]){if(4!==e.length&&7!==e.length)throw new TypeError(`first argument to 'toRgb()' must be a valid color. What appears to be a hex color was given: '${e}', but it doesn't have a valid amount of characters!`);return S(e)}if("hsl"===e.slice(0,3))return m(e);if("hsla"===e.slice(0,4))return m(e);if("hsb"===e.slice(0,3)||"hsv"===e.slice(0,3))return k(e);if("rgba"===e.slice(0,4))return S(v(e,"white"));if("rgb"===e.slice(0,3))return p(e),e;const t=f[e.toLowerCase()];if(null!=t)return S(t);if(/^[0-9A-F]{3}$|^[0-9A-F]{6}$/i.test(e)){if(3!==e.length&&6!==e.length)throw new TypeError(`first argument to 'toRgb()' must be a valid color. '${e}' was given!`);return S(`#${e}`)}throw new TypeError(`Couldn't decode color for input: ${e}`)}(t));return b(d([n*i+e*(1-i),r*i+a*(1-i),o*i+s*(1-i)]))}return b(d([n,r,o]))}function w(e){const[t,n,r]=function(e){if("string"!=typeof e)throw new TypeError("first argument must be of type 'string'!");let t=e.match(/hsv\((.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(null==t&&(t=e.match(/hsb\((.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/)),null==t)throw new TypeError(`Couldn't decode an HSV color from the given input: ${e}`);const n=parseFloat(t[1]),r=parseFloat(t[2]),o=parseFloat(t[3]);if(isNaN(n))throw new TypeError(`Couldn't decode the 'Hue' value of the given HSV color: '${e}'.`);if(isNaN(r))throw new TypeError(`Couldn't decode the 'Saturation' value of the given HSV color: '${e}'.`);if(isNaN(o))throw new TypeError(`Couldn't decode the 'Value/Brightness' value of the given HSV color: '${e}'.`);return[n,r,o]}(e),o=360===t?1:t%360/360*6,i=100===n?1:n%100/100,a=100===r?1:r%100/100,s=Math.floor(o),l=o-s,c=a*(1-i),u=a*(1-l*i),d=a*(1-(1-l)*i),p=s%6,f=[a,u,c,c,d,a][p],g=[d,a,a,u,c,c][p],m=[c,c,d,a,a,u][p];return[Math.round(f*h),Math.round(g*h),Math.round(m*h)]}function k(e){return d(w(e))}function _(e){if("string"!=typeof e)throw new TypeError("first argument to 'toHex()' must be a string!");if("#"===e[0]){if(4!==e.length&&7!==e.length)throw new TypeError(`first argument to 'toHex()' must be a valid color. What appears to be a hex color was given: '${e}', but it doesn't have a valid amount of characters!`);return e}if("hsl"===e.slice(0,3))return b(m(e));if("hsla"===e.slice(0,4))return v(function([e,t,n,r]){return`rgba(${e}, ${t}, ${n}, ${r})`}(y(e)),"white");if("hsb"===e.slice(0,3)||"hsv"===e.slice(0,3))return b(k(e));if("rgba"===e.slice(0,4))return v(e,"white");if("rgb"===e.slice(0,3))return b(e);const t=f[e.toLowerCase()];if(null!=t)return t;if(/^[0-9A-F]{3}$|^[0-9A-F]{6}$/i.test(e)){if(3!==e.length&&6!==e.length)throw new TypeError(`first argument to 'toHex()' must be a valid color. '${e}' was given!`);return`#${e}`}throw new TypeError(`Couldn't decode color for input: ${e}`)}function x(e){if("string"!=typeof e)throw new TypeError("first argument to 'hexToRgbTuple' must be a string!");const t=_(e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,r)=>t+t+n+n+r+r),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null==n)throw new TypeError(`first argument to 'hexToRgb': '${e}' could not be decoded as a hex color!`);return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}function S(e){return d(x(_(e)))}const E=new WeakMap,$=e=>"function"==typeof e&&E.has(e),A=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,C=(e,t,n=null,r=null)=>{for(;t!==n;){const n=t.nextSibling;e.insertBefore(t,r),t=n}},P=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}},T={},N={},F=`{{lit-${String(Math.random()).slice(2)}}}`,L=`\x3c!--${F}--\x3e`,j=new RegExp(`${F}|${L}`),O="$lit$";class z{constructor(e,t){this.parts=[],this.element=t;const n=[],r=[],o=document.createTreeWalker(t.content,133,null,!1);let i=0,a=-1,s=0;const{strings:l,values:{length:c}}=e;for(;s<c;){const e=o.nextNode();if(null!==e){if(a++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let r=0;for(let e=0;e<n;e++)M(t[e].name,O)&&r++;for(;r-- >0;){const t=l[s],n=V.exec(t)[2],r=n.toLowerCase()+O,o=e.getAttribute(r);e.removeAttribute(r);const i=o.split(j);this.parts.push({type:"attribute",index:a,name:n,strings:i}),s+=i.length-1}}"TEMPLATE"===e.tagName&&(r.push(e),o.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(F)>=0){const r=e.parentNode,o=t.split(j),i=o.length-1;for(let t=0;t<i;t++){let n,i=o[t];if(""===i)n=I();else{const e=V.exec(i);null!==e&&M(e[2],O)&&(i=i.slice(0,e.index)+e[1]+e[2].slice(0,-O.length)+e[3]),n=document.createTextNode(i)}r.insertBefore(n,e),this.parts.push({type:"node",index:++a})}""===o[i]?(r.insertBefore(I(),e),n.push(e)):e.data=o[i],s+=i}}else if(8===e.nodeType)if(e.data===F){const t=e.parentNode;null!==e.previousSibling&&a!==i||(a++,t.insertBefore(I(),e)),i=a,this.parts.push({type:"node",index:a}),null===e.nextSibling?e.data="":(n.push(e),a--),s++}else{let t=-1;for(;-1!==(t=e.data.indexOf(F,t+1));)this.parts.push({type:"node",index:-1}),s++}}else o.currentNode=r.pop()}for(const e of n)e.parentNode.removeChild(e)}}const M=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},R=e=>-1!==e.index,I=()=>document.createComment(""),V=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class H{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=A?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],n=this.template.parts,r=document.createTreeWalker(e,133,null,!1);let o,i=0,a=0,s=r.nextNode();for(;i<n.length;)if(o=n[i],R(o)){for(;a<o.index;)a++,"TEMPLATE"===s.nodeName&&(t.push(s),r.currentNode=s.content),null===(s=r.nextNode())&&(r.currentNode=t.pop(),s=r.nextNode());if("node"===o.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(s.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(s,o.name,o.strings,this.options));i++}else this.__parts.push(void 0),i++;return A&&(document.adoptNode(e),customElements.upgrade(e)),e}}const U=` ${F} `;class D{constructor(e,t,n,r){this.strings=e,this.values=t,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let r=0;r<e;r++){const e=this.strings[r],o=e.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===e.indexOf("--\x3e",o+1);const i=V.exec(e);t+=null===i?e+(n?U:L):e.substr(0,i.index)+i[1]+i[2]+O+i[3]+F}return t+=this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const q=e=>null===e||!("object"==typeof e||"function"==typeof e),B=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class W{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new J(this)}_getValue(){const e=this.strings,t=e.length-1;let n="";for(let r=0;r<t;r++){n+=e[r];const t=this.parts[r];if(void 0!==t){const e=t.value;if(q(e)||!B(e))n+="string"==typeof e?e:String(e);else for(const t of e)n+="string"==typeof t?t:String(t)}}return n+=e[t]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class J{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===T||q(e)&&e===this.value||(this.value=e,$(e)||(this.committer.dirty=!0))}commit(){for(;$(this.value);){const e=this.value;this.value=T,e(this)}this.value!==T&&this.committer.commit()}}class G{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(I()),this.endNode=e.appendChild(I())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=I()),e.__insert(this.endNode=I())}insertAfterPart(e){e.__insert(this.startNode=I()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){for(;$(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=T,e(this)}const e=this.__pendingValue;e!==T&&(q(e)?e!==this.value&&this.__commitText(e):e instanceof D?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):B(e)?this.__commitIterable(e):e===N?(this.value=N,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof H&&this.value.template===t)this.value.update(e.values);else{const n=new H(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,r=0;for(const o of e)void 0===(n=t[r])&&(n=new G(this.options),t.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(t[r-1])),n.setValue(o),n.commit(),r++;r<t.length&&(t.length=r,this.clear(n&&n.endNode))}clear(e=this.startNode){P(this.startNode.parentNode,e.nextSibling,this.endNode)}}class Z{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;$(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=T,e(this)}if(this.__pendingValue===T)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=T}}class Q extends W{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new K(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class K extends J{}let X=!1;try{const e={get capture(){return X=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class Y{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=(e=>this.handleEvent(e))}setValue(e){this.__pendingValue=e}commit(){for(;$(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=T,e(this)}if(this.__pendingValue===T)return;const e=this.__pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),r=null!=e&&(null==t||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=ee(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=T}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const ee=e=>e&&(X?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);const te=new class{handleAttributeExpressions(e,t,n,r){const o=t[0];return"."===o?new Q(e,t.slice(1),n).parts:"@"===o?[new Y(e,t.slice(1),r.eventContext)]:"?"===o?[new Z(e,t.slice(1),n)]:new W(e,t,n).parts}handleTextExpression(e){return new G(e)}};function ne(e){let t=re.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},re.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const r=e.strings.join(F);return void 0===(n=t.keyString.get(r))&&(n=new z(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}const re=new Map,oe=new WeakMap;(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const ie=(e,...t)=>new D(e,t,"html",te),ae=(e,...t)=>new class extends D{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const e=super.getTemplateElement(),t=e.content,n=t.firstChild;return t.removeChild(n),C(t,n.firstChild),e}}(e,t,"svg",te),se=133;function le(e,t){const{element:{content:n},parts:r}=e,o=document.createTreeWalker(n,se,null,!1);let i=ue(r),a=r[i],s=-1,l=0;const c=[];let u=null;for(;o.nextNode();){s++;const e=o.currentNode;for(e.previousSibling===u&&(u=null),t.has(e)&&(c.push(e),null===u&&(u=e)),null!==u&&l++;void 0!==a&&a.index===s;)a.index=null!==u?-1:a.index-l,a=r[i=ue(r,i)]}c.forEach(e=>e.parentNode.removeChild(e))}const ce=e=>{let t=11===e.nodeType?0:1;const n=document.createTreeWalker(e,se,null,!1);for(;n.nextNode();)t++;return t},ue=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if(R(t))return n}return-1};const de=(e,t)=>`${e}--${t}`;let pe=!0;void 0===window.ShadyCSS?pe=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),pe=!1);const he=["html","svg"],fe=new Set,ge=(e,t,n)=>{fe.add(e);const r=n?n.element:document.createElement("template"),o=t.querySelectorAll("style"),{length:i}=o;if(0===i)return void window.ShadyCSS.prepareTemplateStyles(r,e);const a=document.createElement("style");for(let e=0;e<i;e++){const t=o[e];t.parentNode.removeChild(t),a.textContent+=t.textContent}e=e,he.forEach(t=>{const n=re.get(de(t,e));void 0!==n&&n.keyString.forEach(e=>{const{element:{content:t}}=e,n=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{n.add(e)}),le(e,n)})});const s=r.content;n?function(e,t,n=null){const{element:{content:r},parts:o}=e;if(null===n||void 0===n)return void r.appendChild(t);const i=document.createTreeWalker(r,se,null,!1);let a=ue(o),s=0,l=-1;for(;i.nextNode();)for(l++,i.currentNode===n&&(s=ce(t),n.parentNode.insertBefore(t,n));-1!==a&&o[a].index===l;){if(s>0){for(;-1!==a;)o[a].index+=s,a=ue(o,a);return}a=ue(o,a)}}(n,a,s.firstChild):s.insertBefore(a,s.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);const l=s.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(n){s.insertBefore(a,s.firstChild);const e=new Set;e.add(a),le(n,e)}};var me;window.JSCompiler_renameProperty=((e,t)=>e);const ye={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},be=(e,t)=>t!==e&&(t==t||e==e),ve={attribute:!0,type:String,converter:ye,reflect:!1,hasChanged:be},we=Promise.resolve(!0),ke=1,_e=4,xe=8,Se=16,Ee=32,$e="finalized";class Ae extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=we,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,n)=>{const r=this._attributeNameForProperty(n,t);void 0!==r&&(this._attributeToPropertyMap.set(r,n),e.push(r))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=ve){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():`__${e}`;Object.defineProperty(this.prototype,e,{get(){return this[n]},set(t){const r=this[e];this[n]=t,this._requestUpdate(e,r)},configurable:!0,enumerable:!0})}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty($e)||e.finalize(),this[$e]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const n of t)this.createProperty(n,e[n])}}static _attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=be){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t.type,r=t.converter||ye,o="function"==typeof r?r:r.fromAttribute;return o?o(e,n):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const n=t.type,r=t.converter;return(r&&r.toAttribute||ye.toAttribute)(e,n)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this._updateState=this._updateState|Ee,this._hasConnectedResolver&&(this._hasConnectedResolver(),this._hasConnectedResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=ve){const r=this.constructor,o=r._attributeNameForProperty(e,n);if(void 0!==o){const e=r._propertyValueToAttribute(t,n);if(void 0===e)return;this._updateState=this._updateState|xe,null==e?this.removeAttribute(o):this.setAttribute(o,e),this._updateState=this._updateState&~xe}}_attributeToProperty(e,t){if(this._updateState&xe)return;const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){const e=n._classProperties.get(r)||ve;this._updateState=this._updateState|Se,this[r]=n._propertyValueFromAttribute(t,e),this._updateState=this._updateState&~Se}}_requestUpdate(e,t){let n=!0;if(void 0!==e){const r=this.constructor,o=r._classProperties.get(e)||ve;r._valueHasChanged(this[e],t,o.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==o.reflect||this._updateState&Se||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,o))):n=!1}!this._hasRequestedUpdate&&n&&this._enqueueUpdate()}requestUpdate(e,t){return this._requestUpdate(e,t),this.updateComplete}async _enqueueUpdate(){let e,t;this._updateState=this._updateState|_e;const n=this._updatePromise;this._updatePromise=new Promise((n,r)=>{e=n,t=r});try{await n}catch(e){}this._hasConnected||await new Promise(e=>this._hasConnectedResolver=e);try{const e=this.performUpdate();null!=e&&await e}catch(e){t(e)}e(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&Ee}get _hasRequestedUpdate(){return this._updateState&_e}get hasUpdated(){return this._updateState&ke}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{(e=this.shouldUpdate(t))&&this.update(t)}catch(t){throw e=!1,t}finally{this._markUpdated()}e&&(this._updateState&ke||(this._updateState=this._updateState|ke,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~_e}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0)}updated(e){}firstUpdated(e){}}Ae[$e]=!0;const Ce="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Pe=Symbol();class Te{constructor(e,t){if(t!==Pe)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(Ce?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const Ne=(e,...t)=>{const n=t.reduce((t,n,r)=>t+(e=>{if(e instanceof Te)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(n)+e[r+1],e[0]);return new Te(n,Pe)};(window.litElementVersions||(window.litElementVersions=[])).push("2.2.1");const Fe=e=>e.flat?e.flat(1/0):function e(t,n=[]){for(let r=0,o=t.length;r<o;r++){const o=t[r];Array.isArray(o)?e(o,n):n.push(o)}return n}(e);class Le extends Ae{static finalize(){super.finalize.call(this),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const e=this.styles,t=[];if(Array.isArray(e)){Fe(e).reduceRight((e,t)=>(e.add(t),e),new Set).forEach(e=>t.unshift(e))}else e&&t.push(e);return t}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Ce?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){super.update(e);const t=this.render();t instanceof D&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){}}function je(){return document.querySelector("micro-panel-editor")}function Oe(e){console.error(e),alert(e.toString())}function ze(e,t,n,r){return new Promise((o,i)=>{const a=new XMLHttpRequest;if(a.upload.addEventListener("progress",r,!1),a.addEventListener("load",e=>{if(a.status>=200&&a.status<300){const e=a.getResponseHeader("Content-Type");e&&e.includes("application/json")?o(JSON.parse(a.responseText)):o(a.getResponseHeader("Location"))}else i(a.status)}),a.addEventListener("error",i),a.addEventListener("abort",i),a.addEventListener("timeout",i),a.upload.addEventListener("error",i),a.upload.addEventListener("abort",i),a.upload.addEventListener("timeout",i),a.open("post",e),t)a.setRequestHeader("Authorization","MediaToken "+t);else{const e=document.cookie.split("; ").find(e=>"Bearer"===e.split("=")[0]);e?a.setRequestHeader("Authorization","Bearer "+e):a.withCredentials=!0}const s=new FormData;s.append("file",n),a.send(s)})}Le.finalized=!0,Le.render=((e,t,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const r=n.scopeName,o=oe.has(t),i=pe&&11===t.nodeType&&!!t.host,a=i&&!fe.has(r),s=a?document.createDocumentFragment():t;if(((e,t,n)=>{let r=oe.get(t);void 0===r&&(P(t,t.firstChild),oe.set(t,r=new G(Object.assign({templateFactory:ne},n))),r.appendInto(t)),r.setValue(e),r.commit()})(e,s,Object.assign({templateFactory:(e=>t=>{const n=de(t.type,e);let r=re.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},re.set(n,r));let o=r.stringsArray.get(t.strings);if(void 0!==o)return o;const i=t.strings.join(F);if(void 0===(o=r.keyString.get(i))){const n=t.getTemplateElement();pe&&window.ShadyCSS.prepareTemplateDom(n,e),o=new z(t,n),r.keyString.set(i,o)}return r.stringsArray.set(t.strings,o),o})(r)},n)),a){const e=oe.get(s);oe.delete(s);const n=e.value instanceof H?e.value.template:void 0;ge(r,s,n),P(t,t.firstChild),t.appendChild(s),oe.set(t,e)}!o&&i&&window.ShadyCSS.styleElement(t.host)});const Me=Ne`
		:host {
			line-height: 1.15;
			-webkit-text-size-adjust: 100%;
			--major-padding: var(--micro-panel-major-padding, 0.5rem);
			--roundness: var(--micro-panel-roundness, 4px);
			--neutral: var(--micro-panel-neutral, #fefefe);
			--neutral-hover: var(--micro-panel-neutral, #ebebeb);
			--accent: var(--micro-panel-accent, rgb(0, 137, 123));
			--accent-hover: var(--micro-panel-accent-hover, rgb(0, 107, 103));
			--light-accent: var(--micro-panel-light-accent, rgba(0, 137, 123, 0.55));
			--text: var(--micro-panel-text, #333);
			color: var(--text);
		}
		:host([hidden]) { display: none !important; }
		* { box-sizing: border-box; }

		input, textarea, button {
			text-transform: none;
			border-radius: var(--roundness);
			padding: 0.4rem;
			outline: none;
			border: 1px solid var(--accent);
			vertical-align: baseline;
		}
		::-moz-focus-inner {
			border-style: none;
			padding: 0;
		}
		input:-moz-focusring, textarea:-moz-focusring, button:-moz-focusring {
			outline: 1px dotted ButtonText;
		}
		button {
			padding: 0.4rem 0.8rem;
			overflow: visible;
			-webkit-appearance: button;
			background: var(--accent);
			color: var(--neutral);
			transition: 0.15s ease-in transform;
		}
		button:focus {
			transform: scale(1.1);
		}
		button:not([disabled]):active {
			transform: scale(0.9);
		}
		button:hover {
			background: var(--accent-hover);
		}
		button[disabled] {
			opacity: 0.5;
		}

		a {
			color: var(--accent);
		}
		a:hover {
			color: var(--accent-hover);
		}

		.icon, .icon-button {
			vertical-align: middle;
		}
		.icon-button {
			padding: 0.2rem;
			border-radius: 100rem;
			background: transparent;
			color: inherit;
			border: none;
		}
		.icon-button:hover {
			background: rgba(10, 10, 10, 0.2);
		}

		.inverted {
			background: var(--accent);
			color: var(--neutral);
		}
		.inverted button {
			background: var(--neutral);
			color: var(--accent);
			border-color: var(--neutral);
		}
		.inverted button:hover {
			background: var(--neutral-hover);
		}

		.header-bar {
			padding: var(--major-padding);
		}
		.bar {
			margin: 0;
			display: flex;
			align-items: baseline;
		}
		.bar label, .bar h1, .bar .stretchy {
			flex: 1;
		}
		.bar > * {
			margin: 0 0.4rem;
		}
		.bar > *:first-child {
			margin-left: 0;
		}
		.bar > * + * {
			margin-right: 0;
		}
		.bar h1 {
			margin: 0;
			font-size: 1.1rem;
		}
		.bar button {
			font-size: 1rem;
		}
`,Re={plus:ae`
		<path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
	`,minus:ae`
		<path fill="currentColor" d="M19,13H5V11H19V13Z" />
	`,chevronUp:ae`
		<path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" />
	`,chevronDown:ae`
		<path fill="currentColor" d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" />
	`,leadPencil:ae`
		<path fill="currentColor" d="M16.84,2.73C16.45,2.73 16.07,2.88 15.77,3.17L13.65,5.29L18.95,10.6L21.07,8.5C21.67,7.89 21.67,6.94 21.07,6.36L17.9,3.17C17.6,2.88 17.22,2.73 16.84,2.73M12.94,6L4.84,14.11L7.4,14.39L7.58,16.68L9.86,16.85L10.15,19.41L18.25,11.3M4.25,15.04L2.5,21.73L9.2,19.94L8.96,17.78L6.65,17.61L6.47,15.29" />
	`,close:ae`
		<path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
	`,cloudUpload:ae`
		<path fill="currentColor" d="M14,13V17H10V13H7L12,8L17,13M19.35,10.03C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.03C2.34,8.36 0,10.9 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.03Z" />
	`,json:ae`
		<path fill="currentColor" d="M5,3H7V5H5V10A2,2 0 0,1 3,12A2,2 0 0,1 5,14V19H7V21H5C3.93,20.73 3,20.1 3,19V15A2,2 0 0,0 1,13H0V11H1A2,2 0 0,0 3,9V5A2,2 0 0,1 5,3M19,3A2,2 0 0,1 21,5V9A2,2 0 0,0 23,11H24V13H23A2,2 0 0,0 21,15V19A2,2 0 0,1 19,21H17V19H19V14A2,2 0 0,1 21,12A2,2 0 0,1 19,10V5H17V3H19M12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15M8,15A1,1 0 0,1 9,16A1,1 0 0,1 8,17A1,1 0 0,1 7,16A1,1 0 0,1 8,15M16,15A1,1 0 0,1 17,16A1,1 0 0,1 16,17A1,1 0 0,1 15,16A1,1 0 0,1 16,15Z" />
	`,mapMarkerPlus:ae`
		<path fill="currentColor" d="M9,11.5A2.5,2.5 0 0,0 11.5,9A2.5,2.5 0 0,0 9,6.5A2.5,2.5 0 0,0 6.5,9A2.5,2.5 0 0,0 9,11.5M9,2C12.86,2 16,5.13 16,9C16,14.25 9,22 9,22C9,22 2,14.25 2,9A7,7 0 0,1 9,2M15,17H18V14H20V17H23V19H20V22H18V19H15V17Z" />
	`};function Ie(e,t=null){return ie`<svg class="icon" width="24" height="24" viewBox="0 0 24 24" role="img" ?aria-hidden=${t} title=${t||""}>
		${e}
		${t?ie`<title>${t}</title>`:""}
	</svg>`}var Ve,He="undefined"!=typeof Symbol?Symbol("immer-nothing"):((Ve={})["immer-nothing"]=!0,Ve),Ue="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-draftable"):"__$immer_draftable",De="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-state"):"__$immer_state";function qe(e){return!!e&&!!e[De]}function Be(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||!!e[Ue]||!!e.constructor[Ue]||rt(e)||it(e))}function We(e){if(e&&e[De])return e[De].base}var Je=Object.assign||function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t.forEach(function(t){"object"==typeof t&&null!==t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e},Ge="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Ze(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();if(rt(e))return new Map(e);if(it(e))return new Set(e);var n=Object.create(Object.getPrototypeOf(e));return Ge(e).forEach(function(r){if(r!==De){var o=Object.getOwnPropertyDescriptor(e,r),i=o.value;if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");i=o.get.call(e)}o.enumerable?n[r]=i:Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0})}}),n}function Qe(e,t){Array.isArray(e)||rt(e)||it(e)?e.forEach(function(n,r){return t(r,n,e)}):Ge(e).forEach(function(n){return t(n,e[n],e)})}function Ke(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!n&&n.enumerable}function Xe(e,t){return rt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ye(e,t){return rt(e)?e.get(t):e[t]}function et(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var tt="undefined"!=typeof Symbol,nt="undefined"!=typeof Map;function rt(e){return nt&&e instanceof Map}var ot="undefined"!=typeof Set;function it(e){return ot&&e instanceof Set}function at(e){var t,n;return(t={})[Symbol.iterator]=function(){return n},t.next=e,n=t}function st(e,t,n){var r="values"!==t;return function(){var t=ct(e)[Symbol.iterator]();return at(function(){var e=t.next();if(!e.done){var o=e.value[0],i=n.get(o);e.value=r?[o,i]:i}return e})}}function lt(e){return function(t,n){var r="entries"===n;return function(){var n=ct(t)[Symbol.iterator]();return at(function(){var o=n.next();if(!o.done){var i=function(t,n){var r=We(n)||n,o=t.drafts.get(r);if(!o){if(t.finalized||!Be(n)||t.finalizing)return n;o=e(n,t),t.drafts.set(r,o),t.modified&&t.copy.add(o)}return o}(t,o.value);o.value=r?[i,i]:i}return o})}}}function ct(e){return e.copy||e.base}function ut(e){if(!Be(e))return e;if(Array.isArray(e))return e.map(ut);if(rt(e))return new Map(e);if(it(e))return new Set(e);var t=Object.create(Object.getPrototypeOf(e));for(var n in e)t[n]=ut(e[n]);return t}function dt(e,t){void 0===t&&(t=!1),!Be(e)||qe(e)||Object.isFrozen(e)||(it(e)?e.add=e.clear=e.delete=pt:rt(e)&&(e.set=e.clear=e.delete=pt),Object.freeze(e),t&&Qe(e,function(e,t){return dt(t,!0)}))}function pt(){throw new Error("This object has been frozen and should not be mutated")}var ht=function(e){this.drafts=[],this.parent=e,this.canAutoFreeze=!0,this.patches=null};function ft(e){e[De].revoke()}function gt(e,t){var n,r=Array.isArray(e),o=kt(e);rt(e)?(n=o,Object.defineProperties(n,xt),tt&&Object.defineProperty(n,Symbol.iterator,Ct(st))):it(e)?function(e){Object.defineProperties(e,Et),tt&&Object.defineProperty(e,Symbol.iterator,Ct(St))}(o):Qe(o,function(t){!function(e,t,n){var r=_t[t];r?r.enumerable=n:_t[t]=r={configurable:!0,enumerable:n,get:function(){return function(e,t){Pt(e);var n=bt(yt(e),t);if(e.finalizing)return n;if(n===bt(e.base,t)&&Be(n))return wt(e),e.copy[t]=gt(n,e);return n}(this[De],t)},set:function(e){!function(e,t,n){if(Pt(e),e.assigned[t]=!0,!e.modified){if(et(n,bt(yt(e),t)))return;vt(e),wt(e)}e.copy[t]=n}(this[De],t,e)}};Object.defineProperty(e,t,r)}(o,t,r||Ke(e,t))});var i=t?t.scope:ht.current,a={scope:i,modified:!1,finalizing:!1,finalized:!1,assigned:rt(e)?new Map:{},parent:t,base:e,draft:o,drafts:it(e)?new Map:null,copy:null,revoke:mt,revoked:!1};return function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})}(o,De,a),i.drafts.push(o),o}function mt(){this.revoked=!0}function yt(e){return e.copy||e.base}function bt(e,t){var n=e[De];if(n&&!n.finalizing){n.finalizing=!0;var r=e[t];return n.finalizing=!1,r}return e[t]}function vt(e){e.modified||(e.modified=!0,e.parent&&vt(e.parent))}function wt(e){e.copy||(e.copy=kt(e.base))}function kt(e){var t=e&&e[De];if(t){t.finalizing=!0;var n=Ze(t.draft,!0);return t.finalizing=!1,n}return Ze(e)}ht.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},ht.prototype.revoke=function(){this.leave(),this.drafts.forEach(ft),this.drafts=null},ht.prototype.leave=function(){this===ht.current&&(ht.current=this.parent)},ht.current=null,ht.enter=function(){return this.current=new ht(this.current)};var _t={};var xt=$t({size:function(e){return yt(e).size},has:function(e){return function(t){return yt(e).has(t)}},set:function(e){return function(t,n){return yt(e).get(t)!==n&&(wt(e),vt(e),e.assigned.set(t,!0),e.copy.set(t,n)),e.draft}},delete:function(e){return function(t){return wt(e),vt(e),e.assigned.set(t,!1),e.copy.delete(t),!1}},clear:function(e){return function(){e.copy||wt(e),vt(e),e.assigned=new Map;for(var t=0,n=yt(e).keys();t<n.length;t+=1){var r=n[t];e.assigned.set(r,!1)}return e.copy.clear()}},forEach:function(e,t,n){return function(t){yt(e).forEach(function(e,r,o){t(n.get(r),r,o)})}},get:function(e){return function(t){var n=yt(e).get(t);if(e.finalizing||e.finalized||!Be(n))return n;if(n!==e.base.get(t))return n;var r=gt(n,e);return wt(e),e.copy.set(t,r),r}},keys:function(e){return function(){return yt(e).keys()}},values:st,entries:st});var St=lt(gt),Et=$t({size:function(e){return yt(e).size},add:function(e){return function(t){return yt(e).has(t)||(vt(e),e.copy||wt(e),e.copy.add(t)),e.draft}},delete:function(e){return function(t){return vt(e),e.copy||wt(e),e.copy.delete(t)}},has:function(e){return function(t){return yt(e).has(t)}},clear:function(e){return function(){return vt(e),e.copy||wt(e),e.copy.clear()}},keys:St,entries:St,values:St,forEach:function(e){return function(t,n){for(var r=St(e)(),o=r.next();!o.done;)t.call(n,o.value,o.value,e.draft),o=r.next()}}});function $t(e){return Object.keys(e).reduce(function(t,n){var r="size"===n?At:Ct;return t[n]=r(e[n],n),t},{})}function At(e){return{get:function(){var t=this[De];return Pt(t),e(t)}}}function Ct(e,t){return{get:function(){return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var o=this[De];return Pt(o),e(o,t,o.draft).apply(void 0,n)}}}}function Pt(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(yt(e)))}function Tt(e){for(var t=e.length-1;t>=0;t--){var n=e[t][De];n.modified||(Array.isArray(n.base)?Ft(n)&&vt(n):rt(n.base)?Lt(n)&&vt(n):it(n.base)?jt(n)&&vt(n):Nt(n)&&vt(n))}}function Nt(e){for(var t=e.base,n=e.draft,r=Object.keys(n),o=r.length-1;o>=0;o--){var i=r[o],a=t[i];if(void 0===a&&!Xe(t,i))return!0;var s=n[i],l=s&&s[De];if(l?l.base!==a:!et(s,a))return!0}return r.length!==Object.keys(t).length}function Ft(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}function Lt(e){var t=e.base,n=e.draft;if(t.size!==n.size)return!0;var r=!1;return n.forEach(function(e,n){r||(r=Be(e)?e.modified:e!==t.get(n))}),r}function jt(e){var t=e.base,n=e.draft;if(t.size!==n.size)return!0;var r=!1;return n.forEach(function(e,n){r||(r=Be(e)?e.modified:!t.has(n))}),r}var Ot,zt,Mt=Object.freeze({willFinalize:function(e,t,n){e.drafts.forEach(function(e){e[De].finalizing=!0}),n?qe(t)&&t[De].scope===e&&Tt(e.drafts):(e.patches&&function e(t){if(t&&"object"==typeof t){var n=t[De];if(n){var r=n.base,o=n.draft,i=n.assigned;if(Array.isArray(t)){if(Ft(n)){if(vt(n),i.length=!0,o.length<r.length)for(var a=o.length;a<r.length;a++)i[a]=!1;else for(var s=r.length;s<o.length;s++)i[s]=!0;for(var l=0;l<o.length;l++)void 0===i[l]&&e(o[l])}}else Object.keys(o).forEach(function(t){void 0!==r[t]||Xe(r,t)?i[t]||e(o[t]):(i[t]=!0,vt(n))}),Object.keys(r).forEach(function(e){void 0!==o[e]||Xe(o,e)||(i[e]=!1,vt(n))})}}}(e.drafts[0]),Tt(e.drafts))},createProxy:gt});function Rt(e,t){var n=t?t.scope:ht.current,r={scope:n,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},o=r,i=It;Array.isArray(e)?(o=[r],i=Vt):rt(e)?(i=Ut,r.drafts=new Map,r.assigned=new Map):it(e)&&(i=qt,r.drafts=new Map);var a=Proxy.revocable(o,i),s=a.revoke,l=a.proxy;return r.draft=l,r.revoke=s,n.drafts.push(l),l}var It={get:function(e,t){if(t===De)return e;var n=e.drafts;if(!e.modified&&Xe(n,t))return n[t];var r=Bt(e)[t];if(e.finalized||!Be(r))return r;if(e.modified){if(r!==Wt(e.base,t))return r;n=e.copy}return n[t]=Rt(r,e)},has:function(e,t){return t in Bt(e)},ownKeys:function(e){return Reflect.ownKeys(Bt(e))},set:function(e,t,n){if(!e.modified){var r=Wt(e.base,t);if(n?et(r,n)||n===e.drafts[t]:et(r,n)&&t in e.base)return!0;Jt(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){return void 0!==Wt(e.base,t)||t in e.base?(e.assigned[t]=!1,Jt(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Bt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&(r.writable=!0,r.configurable=!Array.isArray(n)||"length"!==t),r},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},Vt={};Qe(It,function(e,t){Vt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Vt.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return It.deleteProperty.call(this,e[0],t)},Vt.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return It.set.call(this,e[0],t,n)};var Ht=["ownKeys","has","set","deleteProperty","defineProperty","getOwnPropertyDescriptor","preventExtensions","isExtensible","getPrototypeOf"].reduce(function(e,t){return e[t]=function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return Reflect[t].apply(Reflect,[Bt(e)].concat(n))},e},{}),Ut=Gt(((Ot={})[De]=function(e){return e},Ot.size=function(e){return Bt(e).size},Ot.has=function(e){return function(t){return Bt(e).has(t)}},Ot.set=function(e){return function(t,n){var r=Bt(e);return r.has(t)&&r.get(t)===n||(Jt(e),e.assigned.set(t,!0),e.copy.set(t,n)),e.draft}},Ot.delete=function(e){return function(t){return!!Bt(e).has(t)&&(Jt(e),e.assigned.set(t,!1),e.copy.delete(t))}},Ot.clear=function(e){return function(){Jt(e),e.assigned=new Map;for(var t=0,n=Bt(e).keys();t<n.length;t+=1){var r=n[t];e.assigned.set(r,!1)}return e.copy.clear()}},Ot.forEach=function(e,t,n){return function(t,r){return Bt(e).forEach(function(e,o,i){var a=n.get(o);t.call(r,a,o,i)})}},Ot.get=function(e){return function(t){var n=e[e.modified?"copy":"drafts"];if(n.has(t))return n.get(t);var r=Bt(e).get(t);if(e.finalized||!Be(r))return r;var o=Rt(r,e);return n.set(t,o),o}},Ot.keys=function(e){return function(){return Bt(e).keys()}},Ot.values=st,Ot.entries=st,Ot[tt?Symbol.iterator:"@@iterator"]=st,Ot)),Dt=lt(Rt),qt=Gt(((zt={})[De]=function(e){return e},zt.size=function(e){return Bt(e).size},zt.has=function(e){return function(t){return Bt(e).has(t)}},zt.add=function(e){return function(t){return Bt(e).has(t)||(Jt(e),e.copy.add(t)),e.draft}},zt.delete=function(e){return function(t){return Jt(e),e.copy.delete(t)}},zt.clear=function(e){return function(){return Jt(e),e.copy.clear()}},zt.forEach=function(e){return function(t,n){for(var r=Dt(e)(),o=r.next();!o.done;)t.call(n,o.value,o.value,e.draft),o=r.next()}},zt.keys=Dt,zt.values=Dt,zt.entries=Dt,zt[tt?Symbol.iterator:"@@iterator"]=Dt,zt));function Bt(e){return e.copy||e.base}function Wt(e,t){var n=e[De],r=Reflect.getOwnPropertyDescriptor(n?Bt(n):e,t);return r&&r.value}function Jt(e){if(!e.modified){e.modified=!0;var t=e.base,n=e.drafts,r=e.parent,o=Ze(t);it(t)?(i=o,n.forEach(function(e){var t=We(e);t&&i.delete(t),i.add(e)})):(rt(t)?function(e,t){t.forEach(function(t,n){return e.set(n,t)})}(o,n):Je(o,n),e.drafts=null),e.copy=o,r&&Jt(r)}var i}function Gt(e){return Object.assign({},Ht,{get:function(t,n,r){return e.hasOwnProperty(n)?e[n](t,n,r):Reflect.get(t,n,r)},setPrototypeOf:function(e){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}})}var Zt=Object.freeze({willFinalize:function(){},createProxy:Rt});function Qt(e,t,n,r){var o,i,a=e.base,s=e.copy,l=e.assigned;s.length<a.length&&(a=(o=[s,a])[0],s=o[1],n=(i=[r,n])[0],r=i[1]);for(var c=s.length-a.length,u=0;a[u]===s[u]&&u<a.length;)++u;for(var d=a.length;d>u&&a[d-1]===s[d+c-1];)--d;for(var p=u;p<d;++p)if(l[p]&&s[p]!==a[p]){var h=t.concat([p]);n.push({op:"replace",path:h,value:s[p]}),r.push({op:"replace",path:h,value:a[p]})}for(var f=n.length,g=d+c-1;g>=d;--g){var m=t.concat([g]);n[f+g-d]={op:"add",path:m,value:s[g]},r.push({op:"remove",path:m})}}function Kt(e,t,n,r){var o=e.base,i=e.copy;Qe(e.assigned,function(e,a){var s=Ye(o,e),l=Ye(i,e),c=a?Xe(o,e)?"replace":"add":"remove";if(s!==l||"replace"!==c){var u=t.concat(e);n.push("remove"===c?{op:c,path:u}:{op:c,path:u,value:l}),r.push("add"===c?{op:"remove",path:u}:"remove"===c?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}})}function Xt(e,t,n,r){for(var o=e.base,i=e.copy,a=0,s=0,l=o;s<l.length;s+=1){var c=l[s];if(!i.has(c)){var u=t.concat([a]);n.push({op:"remove",path:u,value:c}),r.unshift({op:"add",path:u,value:c})}a++}a=0;for(var d=0,p=i;d<p.length;d+=1){var h=p[d];if(!o.has(h)){var f=t.concat([a]);n.push({op:"add",path:f,value:h}),r.unshift({op:"remove",path:f,value:h})}a++}}var Yt=function(e,t){for(var n=0,r=t;n<r.length;n+=1){var o=r[n],i=o.path,a=o.op;if(!i.length)throw new Error("Illegal state");for(var s=e,l=0;l<i.length-1;l++)if(!(s=Ye(s,i[l]))||"object"!=typeof s)throw new Error("Cannot apply patch, path doesn't resolve: "+i.join("/"));var c=ut(o.value),u=i[i.length-1];switch(a){case"replace":if(rt(s))s.set(u,c);else{if(it(s))throw new Error('Sets cannot have "replace" patches.');s[u]=c}break;case"add":it(s)&&s.delete(o.value),Array.isArray(s)?s.splice(u,0,c):rt(s)?s.set(u,c):it(s)?s.add(c):s[u]=c;break;case"remove":Array.isArray(s)?s.splice(u,1):rt(s)?s.delete(u):it(s)?s.delete(o.value):delete s[u];break;default:throw new Error("Unsupported patch operation: "+a)}}return e};var en={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:"undefined"!=typeof process?"production"!==process.env.NODE_ENV:"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},tn=function(e){Je(this,en,e),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)};tn.prototype.produce=function(e,t,n){var r,o=this;if("function"==typeof e&&"function"!=typeof t){var i=t;t=e;var a=this;return function(e){var n=this;void 0===e&&(e=i);for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return a.produce(e,function(e){return t.call.apply(t,[n,e].concat(r))})}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("The third argument to `produce` must be a function or undefined");if(Be(e)){var s=ht.enter(),l=this.createProxy(e),c=!0;try{r=t(l),c=!1}finally{c?s.revoke():s.leave()}return"undefined"!=typeof Promise&&r instanceof Promise?r.then(function(e){return s.usePatches(n),o.processResult(e,s)},function(e){throw s.revoke(),e}):(s.usePatches(n),this.processResult(r,s))}if((r=t(e))!==He)return void 0===r&&(r=e),this.maybeFreeze(r,!0),r},tn.prototype.produceWithPatches=function(e,t,n){var r,o,i=this;if("function"==typeof e)return function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return i.produceWithPatches(t,function(t){return e.apply(void 0,[t].concat(n))})};if(n)throw new Error("A patch listener cannot be passed to produceWithPatches");return[this.produce(e,t,function(e,t){r=e,o=t}),r,o]},tn.prototype.createDraft=function(e){if(!Be(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=ht.enter(),n=this.createProxy(e);return n[De].isManual=!0,t.leave(),n},tn.prototype.finishDraft=function(e,t){var n=e&&e[De];if(!n||!n.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(n.finalized)throw new Error("The given draft is already finalized");var r=n.scope;return r.usePatches(t),this.processResult(void 0,r)},tn.prototype.setAutoFreeze=function(e){this.autoFreeze=e},tn.prototype.setUseProxies=function(e){this.useProxies=e,Je(this,e?Zt:Mt)},tn.prototype.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}return qe(e)?Yt(e,t):this.produce(e,function(e){return Yt(e,t.slice(n+1))})},tn.prototype.processResult=function(e,t){var n=t.drafts[0],r=void 0!==e&&e!==n;if(this.willFinalize(t,e,r),r){if(n[De].modified)throw t.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");Be(e)&&(e=this.finalize(e,null,t),this.maybeFreeze(e)),t.patches&&(t.patches.push({op:"replace",path:[],value:e}),t.inversePatches.push({op:"replace",path:[],value:n[De].base}))}else e=this.finalize(n,[],t);return t.revoke(),t.patches&&t.patchListener(t.patches,t.inversePatches),e!==He?e:void 0},tn.prototype.finalize=function(e,t,n){var r=this,o=e[De];if(!o)return Object.isFrozen(e)?e:this.finalizeTree(e,null,n);if(o.scope!==n)return e;if(!o.modified)return this.maybeFreeze(o.base,!0),o.base;if(!o.finalized){if(o.finalized=!0,this.finalizeTree(o.draft,t,n),this.onDelete&&!it(o.base))if(this.useProxies){Qe(o.assigned,function(e,t){t||r.onDelete(o,e)})}else{var i=o.base,a=o.copy;Qe(i,function(e){Xe(a,e)||r.onDelete(o,e)})}this.onCopy&&this.onCopy(o),this.autoFreeze&&n.canAutoFreeze&&dt(o.copy,!1),t&&n.patches&&function(e,t,n,r){(Array.isArray(e.base)?Qt:it(e.base)?Xt:Kt)(e,t,n,r)}(o,t,n.patches,n.inversePatches)}return o.copy},tn.prototype.finalizeTree=function(e,t,n){var r=this,o=e[De];o&&(this.useProxies||(o.copy=Ze(o.draft,!0)),e=o.copy);var i=!!t&&!!n.patches,a=function(s,l,c){if(l===c)throw Error("Immer forbids circular references");var u=!!o&&c===e,d=it(c);if(qe(l)){var p=u&&i&&!d&&!Xe(o.assigned,s)?t.concat(s):null;if(function(e,t,n){rt(e)?e.set(t,n):it(e)?(e.delete(t),e.add(n)):Array.isArray(e)||Ke(e,t)?e[t]=n:Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}(c,s,l=r.finalize(l,p,n)),qe(l)&&(n.canAutoFreeze=!1),u&&l===Ye(o.base,s))return}else{if(u&&et(l,Ye(o.base,s)))return;Be(l)&&!Object.isFrozen(l)&&(Qe(l,a),r.maybeFreeze(l))}u&&r.onAssign&&!d&&r.onAssign(o,s,l)};return Qe(e,a),e},tn.prototype.maybeFreeze=function(e,t){void 0===t&&(t=!1),this.autoFreeze&&!qe(e)&&dt(e,t)};var nn=new tn,rn=nn.produce;nn.produceWithPatches.bind(nn),nn.setAutoFreeze.bind(nn),nn.setUseProxies.bind(nn),nn.applyPatches.bind(nn),nn.createDraft.bind(nn),nn.finishDraft.bind(nn);customElements.define("micro-panel-editor-entry",class extends Le{static get properties(){return{defaultctype:{type:String},entry:{type:Object},entryIsNew:{type:Boolean},setEntry:{type:Function},hiddenProps:{type:Object},openUploaders:{type:Object},uploadQueues:{type:Object},openJsonEditors:{type:Object},jsonParseError:{type:Object},media:{type:String},mediatoken:{type:String},mediafirehose:{type:String},cats:{type:Array}}}constructor(){super(),this.hiddenProps={},this.openUploaders={photo:!0,video:!0,audio:!0},this.uploadQueues={photo:[],video:[],audio:[]},this.openJsonEditors={filter:!0,unfilter:!0,"feed-settings":!0,"site-settings":!0,"site-web-push-subscriptions":!0},this.jsonParseError={}}connectedCallback(){super.connectedCallback(),this.mediafirehose&&(this.mediaEventSrc=new EventSource(this.mediafirehose),this.mediaEventSrc.addEventListener("message",e=>{if(e.data.length<2)return;const{object:t,url:n}=JSON.parse(e.data);this._modify(this.entry,e=>{for(const r of Object.keys(e.properties))e.properties[r]=e.properties[r].map(e=>e==n?t:e)})}))}static get styles(){return[Me,Ne`
				:host { display: block; }
				fieldset {
					border: 0;
					margin: 1rem auto;
					padding: 0;
					box-shadow: rgba(20,20,20,0.24) 0 0 6px;
					border-radius: var(--roundness);
					overflow: hidden;
				}
				header {
					background: var(--light-accent);
					color: var(--neutral);
					padding: 0.15rem 0.5rem;
				}
				.bar button + label {
					margin-left: 0;
				}
				.input-row {
					padding: 0.5rem;
					display: flex;
					align-items: start;
				}
				.input-row + .input-row {
					padding-top: 0;
				}
				fieldset > .input-row:nth-of-type(even) {
					background: #fafafa;
				}
				.input-row input, .input-row textarea, .input-row code-flask,
				.input-row micro-panel-editor-entry, .input-row .media-editor, .input-row .error-value {
					flex: 1;
				}
				.input-row button {
					margin: 0 0.5rem;
				}
				.input-row button:last-child {
					margin-right: 0;
				}
				.input-row-labeled {
					align-items: baseline;
				}
				.input-row-photo-stuff input {
					width: 5em;
				}
				textarea, code-flask {
					resize: vertical;
					min-height: 200px;
				}
				.error-value {
					color: #bb1111;
				}
				.json-error {
					background: #bb1111;
					color: #fff;
					padding: 0.5rem;
				}

				.cat-suggest {
					padding: 0.5rem;
					font-size: 1.1em;
					line-height: 2;
				}

				.upload-zone {
					position: relative;
					padding: 0.5rem;
				}
				.drag-overlay {
					display: none;
				}
				.dragging .drag-overlay {
					display: flex;
					align-items: center;
					justify-content: center;
					text-align: center;
					position: absolute;
					top: 0;
					right: 0;
					bottom: 0;
					left: 0;
					background: rgba(60, 60, 60, 0.8);
					color: #fff;
				}
				progress {
					display: block;
					width: 100%;
					margin: 0.1rem 0 0.4rem;
				}

				img, video {
					max-width: 100%;
				}
				.palette-row {
					flex-wrap: wrap;
					line-height: 1.9;
				}
				.palette-color, .input-row-photo-stuff label {
					border-right: 1px solid #999;
					padding-right: 0.5rem;
					margin-right: 0.5rem;
				}
				.palette-color:first-of-type {
					margin-left: 0.5rem;
				}
				.palette-color:last-of-type, .input-row-photo-stuff label:last-of-type {
					border-right: 0;
				}

				@media screen and (min-width: 700px) {
					:host(.root-editor) fieldset { width: 70%; }
				}
			`]}render(){const{defaultctype:e,entry:t,entryIsNew:n,hiddenProps:r,openUploaders:o,uploadQueues:i,openJsonEditors:a,jsonParseError:s,media:l,mediatoken:c,cats:u}=this;return ie`
			${t&&t.type?ie`
				<fieldset>
					${t.type.map((e,r)=>ie`
						<div class="input-row">
							<input type="text" .value=${e} @change=${e=>this._modify(t,t=>t.type[r]=e.target.value)} ?disabled=${!n}>
							${0!==r&&n?ie`
								<button @click=${e=>this._modify(t,e=>e.type.splice(r,1))} title="Delete this type" class="icon-button">${Ie(Re.minus)}</button>
							`:""}
							${n?ie`
								<button @click=${e=>this._modify(t,e=>e.type.push(""))} title="Add new type" class="icon-button">${Ie(Re.plus)}</button>
							`:""}
						</div>
					`)}
				</fieldset>
			`:""}

			${t&&t.properties&&Object.keys(t.properties).map(n=>ie`
				<fieldset>
					<header class="bar">
						<button @click=${e=>{this.hiddenProps=rn(r,e=>{e[n]=!e[n]})}} title="Toggle display of this property" class="icon-button">${Ie(r[n]?Re.chevronDown:Re.chevronUp)}</button>
						<label>${n}</label>
						<button @click=${e=>this._modify(t,e=>{delete e.properties[n],"x-micro-panel-deleted-properties"in e||(e["x-micro-panel-deleted-properties"]=[]),e["x-micro-panel-deleted-properties"].push(n)})} title="Delete this property" class="icon-button">${Ie(Re.minus)}</button>
						<button @click=${e=>{this.openJsonEditors=rn(a,e=>{e[n]=!e[n]}),this.jsonParseError=rn(s,e=>{e[n]=null})}} title="Edit this property as JSON" class="icon-button">${Ie(Re.json)}</button>
						${"geolocation"in navigator?ie`
							<button @click=${e=>(async function(){const e=await new Promise((e,t)=>navigator.geolocation.getCurrentPosition(e,t));return{type:["h-geo"],properties:{latitude:[e.coords.latitude.toString()],longitude:[e.coords.longitude.toString()]}}})().then(e=>this._modify(t,t=>t.properties[n].push(e))).catch(Oe)} title="Add geolocation" class="icon-button">${Ie(Re.mapMarkerPlus)}</button>
						`:""}
						${l&&!o[n]?ie`
							<button @click=${e=>{this.uploadQueues=rn(i,e=>{e[n]=[]}),this.openUploaders=rn(o,e=>{e[n]=!0})}} title="Upload media files" class="icon-button">${Ie(Re.cloudUpload)}</button>
						`:""}
						<button @click=${e=>this._modify(t,e=>e.properties[n].push(""))} title="Add new value to this property" class="icon-button">${Ie(Re.plus)}</button>
					</header>
					${r[n]?"":a[n]?this._jsonEditor(t,n,s):t.properties[n]&&t.properties[n].map((r,o)=>ie`
						<div class="input-row input-row-labeled">
							${this._rowEditor(t,n,r,o,l,c,u,e)}
							<button @click=${e=>this._modify(t,e=>e.properties[n].splice(o,1))} title="Delete this value" class="icon-button">${Ie(Re.minus)}</button>
						</div>
					`)}
					${r[n]||"category"!==n?"":ie`
						<div class="cat-suggest">
							${[...u].map(e=>t.properties.category.includes(e)?"":ie`
								<button @click=${n=>this._modify(t,t=>t.properties.category.push(e))}>${e}</button>
							`)}
						</div>
					`}
					${!r[n]&&o[n]?this._mediaUploader(t,n,l,c,i):""}
				</fieldset>
			`)}

		${t&&t.type&&t.type.length>0&&"h-geo"===t.type[0]?ie`
			<fieldset class="input-row">
				<button @click=${e=>(async function({latitude:e,longitude:t}){const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${encodeURIComponent(e[0])}&lon=${encodeURIComponent(t[0])}`),{address:r}=await n.json(),o={latitude:e,longitude:t,"street-address":[r.road],"extended-address":[r.suburb],locality:[r.hamlet||r.village||r.town||r.city],region:[r.county&&r.state?r.county+", "+r.state:r.state||r.county],"postal-code":[r.postcode],"country-name":[r.country],"country-code":[r.country_code&&r.country_code.toUpperCase()]};for(const e of Object.keys(o))o[e][0]||delete o[e];return o})(t.properties).then(e=>this._modify(t,t=>{t.type[0]="h-adr",t.properties=e})).catch(Oe)}>Find street address via Nominatim</button>
			</fieldset>
		`:""}

		<fieldset class="input-row">
			<input type="text" placeholder="Add property..." id="new-prop-inp" @keydown=${e=>this.addNewProp(e,t)}/>
			<button @click=${e=>this.addNewProp(e,t)} class="icon-button">${Ie(Re.plus)}</button>
		</fieldset>
		`}_rowEditor(e,t,n,r,o,i,a,s){return"site-css"===t&&"string"==typeof n?ie`
				<code-flask word-wrap language="css" .value=${n} @value-changed=${n=>this._modify(e,e=>e.properties[t][r]=n.target.value)}></code-flask>
			`:"string"==typeof n?ie`
				<input type="text" .value=${n} @change=${n=>this._modify(e,e=>e.properties[t][r]=n.target.value)}/>
			`:null===n?ie`<div class="error-value">null</div>`:"object"!=typeof n?ie`<div class="error-value">Item of unsupported type ${typeof n}</div>`:"subscriptions"===t?ie`
				Feed&nbsp;<input type="url" .value=${n.feed} @value-changed=${n=>this._modify(e,e=>e.properties[t][r].feed=n.target.value)}>&nbsp;entries: ${(n.entries||[]).length}
			`:"type"in n?ie`
				<micro-panel-editor-entry
					.media=${o} .mediatoken=${i} .cats=${a} .defaultctype=${s}
					.entry=${n}
					.setEntry=${n=>this._modify(e,e=>e.properties[t][r]=n)}>
				</micro-panel-editor-entry>
			`:"html"in n?ie`
				<code-flask word-wrap language="markup" .value=${n.html} @value-changed=${n=>this._modify(e,e=>e.properties[t][r].html=n.target.value)}></code-flask>
			`:"markdown"in n?ie`
				<code-flask word-wrap language="markdown" .value=${n.markdown} @value-changed=${n=>this._modify(e,e=>e.properties[t][r].markdown=n.target.value)}></code-flask>
			`:"source"in n?ie`
				<div class="media-editor">
					${n.width||n.height?ie`
						<div class="input-row">
							<img src=${n.tiny_preview} alt="" />
							[${n.width}x${n.height}]
						</div>`:""}
					${n.source.map(e=>ie`
						<div class="input-row">
							Source&nbsp;<code>${e.type}</code>&nbsp;${e.original?"original":""}
							${e.src?ie`&nbsp;<a href=${e.src}>&lt;src&gt</a>`:""}
							${e.srcset?e.srcset.map(e=>ie`&nbsp;<a href=${e.src}>&lt;width ${e.width}&gt</a>`):""}
						</div>
					`)}
					${n.palette?ie`
						<div class="input-row input-row-labeled palette-row">
							Palette
							${n.palette.map((n,o)=>ie`
								<label class="palette-color">
									<input type="color" value=${b(d([n.r||0,n.g||0,n.b||0]))} @change=${n=>this._modify(e,e=>{const[i,a,s]=x(n.target.value);e.properties[t][r].palette[o]={r:i,g:a,b:s}})}/>
								</label>
							`)}
						</div>`:""}
					<div class="input-row input-row-labeled input-row-photo-stuff">
						<label>
							ƒ/<input type="number" min="0.0" step="0.01" value=${n.aperture||null} @change=${n=>this._modify(e,e=>e.properties[t][r].aperture=parseFloat(n.target.value))}/>
						</label>
						<label>
							Shutter <input type="number" min="0" step="1" value=${(n.shutter_speed||[])[0]||null} @change=${n=>this._modify(e,e=>e.properties[t][r].shutter_speed=[parseFloat(n.target.value),(e.properties[t][r].shutter_speed||[])[1]||1])}/>/<input type="number" min="0" step="1" value=${(n.shutter_speed||[])[1]||null} @change=${n=>this._modify(e,e=>e.properties[t][r].shutter_speed=[(e.properties[t][r].shutter_speed||[])[0]||1,parseFloat(n.target.value)])}/> s
						</label>
						<label>
							ISO <input type="number" min="0" step="1" value=${n.iso||null} @change=${n=>this._modify(e,e=>e.properties[t][r].iso=parseInt(n.target.value))}/>
						</label>
						<label>
							Focal <input type="number" min="0" step="0.01" value=${n.focal_length||null} @change=${n=>this._modify(e,e=>e.properties[t][r].focal_length=parseFloat(n.target.value))}/> mm
						</label>
					</div>
					<label class="input-row input-row-labeled">
						Alt text&nbsp;
						<input type="text" value=${n.alt||""} @change=${n=>this._modify(e,e=>e.properties[t][r].alt=n.target.value)}/>
					</label>
					<div class="input-row input-row-labeled">
						<label for=${`id-${n}`}>
							ID&nbsp;
						</label>
						<input type="text" id=${`id-${n}`} value=${n.id||""} @change=${n=>this._modify(e,e=>e.properties[t][r].id=n.target.value)}/>&nbsp;
						<code @click=${e=>window.getSelection().selectAllChildren(e.target)}>
							&lt;${t}-here id="${n.id||""}"&gt;&lt;/${t}-here&gt;
						</code>
					</label>
				</div>
			`:ie`<div class="error-value">Unsupported object with keys: ${Object.keys(n).join(", ")}</div>`}_jsonEditor(e,t,n){return ie`
			<code-flask word-wrap language="json" .value=${JSON.stringify(e.properties[t],null,2)} @value-changed=${r=>this._modify(e,e=>{try{e.properties[t]=JSON.parse(r.target.value),this.jsonParseError=rn(n,e=>{e[t]=null})}catch(e){this.jsonParseError=rn(n,n=>{n[t]=e.toString()})}})}></code-flask>
			${n[t]?ie`<div class="json-error">
				<p><strong>JSON parsing error!</strong> The changes are not saved when this error is present. Please fix the syntax in the editor above. The error is:</p>
				<p><code>${n[t]}</code></p>
			</div>`:""}
		`}_mediaUploader(e,t,n,r,o){return ie`
			<div class="upload-zone"
				@dragenter=${e=>{e.stopPropagation(),e.preventDefault(),console.log(this),this.dragFirst?this.dragSecond=!0:(this.dragFirst=!0,e.dataTransfer.dropEffect="copy",e.target.classList.add("dragging"))}}
				@dragover=${e=>{e.stopPropagation(),e.preventDefault()}}
				@dragleave=${e=>{if(e.stopPropagation(),e.preventDefault(),this.dragSecond?this.dragSecond=!1:this.dragFirst=!1,!this.dragFirst&&!this.dragSecond){console.log(e);for(const e of this.shadowRoot.querySelectorAll(".upload-zone"))e.classList.remove("dragging")}}}
				@drop=${e=>{e.stopPropagation(),e.preventDefault(),this.dragFirst=!1,this.dragSecond=!1;for(const e of this.shadowRoot.querySelectorAll(".upload-zone"))e.classList.remove("dragging");this.uploadQueues=rn(o,n=>{for(const r of e.dataTransfer.files)n[t].push({file:r}),console.log(r)})}}>
				Drag'n'drop or select <input type="file" multiple @change=${e=>{this.uploadQueues=rn(o,n=>{for(const r of e.target.files)n[t].push({file:r}),console.log(r)})}}>
				to upload.
				${o[t].length>0?ie`
					<div class="upload-queue">
						${o[t].map(({file:e,progress:n},r)=>ie`
							<div class="upload-queue-file bar">
								<div class="stretchy">
									<div>${e.name}</div>
									${n?ie`<progress max="100" value=${n}>${n}%</progress>`:""}
								</div>
								<button @click=${e=>this.uploadQueues=rn(o,e=>{e[t].splice(r,1)})} title="Delete this file from the queue" class="icon-button">${Ie(Re.minus)}</button>
							</div>
						`)}
					</div>
					<button @click=${async e=>{for(const[i,a]of o[t].entries())try{const o=await ze(n,r,a.file,e=>this.uploadQueues=rn(this.uploadQueues,n=>{const r=n[t].findIndex(e=>e.file===a.file);e.lengthComputable?n[t][r].progress=e.loaded/e.total*100:n[t][r].progress="ind"}));this._modify(this.entry,e=>{e.properties[t].push(o)}),this.uploadQueues=rn(this.uploadQueues,e=>{e[t].splice(e[t].findIndex(e=>e.file===a.file),1)})}catch(e){Oe(e)}}}>Upload!</button>
				`:""}
				<div class="drag-overlay">
					Drop files here!
				</div>
			</div>
		`}addNewProp(e,t){if("key"in e&&"Enter"!==e.key)return;const n=this.shadowRoot.getElementById("new-prop-inp"),r=n.value;this._modify(t,e=>{r.length>0&&!(r in e.properties)&&(e.properties[r]="photo"===r||"video"===r||"audio"===r||"location"===r?[]:"content"===r?[{[this.defaultctype]:""}]:[""],"x-micro-panel-deleted-properties"in e&&(e["x-micro-panel-deleted-properties"]=e["x-micro-panel-deleted-properties"].filter(e=>e!==r)))}),n.value=""}_modify(e,t){this.setEntry(rn(e,e=>{t(e)}))}});customElements.define("micro-panel-editor",class extends Le{static get properties(){return{micropub:{type:String},media:{type:String},mediatoken:{type:String},mediafirehose:{type:String},defaultctype:{type:String},originalUrl:{type:String},entry:{type:Object},entryIsNew:{type:Boolean},entryIsModified:{type:Boolean},requestInFlight:{type:Boolean},cats:{type:Array}}}constructor(){super(),this.cats=new Set;for(const e of document.querySelectorAll("[data-mf-category]")){const t=e.dataset.mfCategory.trim();t.length>0&&this.cats.add(t)}}connectedCallback(){super.connectedCallback();const e=new URLSearchParams(document.location.search.substring(1));e.has("mp-reaction")&&(e.has("with")?this.newReaction(e.get("mp-reaction"),e.get("with"),e.get("content")):this.newEntry({name:[],content:[{[this.defaultctype||"html"]:e.get("content")}],category:[],photo:[]}))}static get styles(){return[Me,Ne`
				:host {
					display: flex;
					flex-direction: column;
					position: fixed;
					top: 0;
					bottom: 0;
					left: 0;
					right: 0;
					background: var(--neutral);
					z-index: 69420;
				}
				#root-editor {
					flex: 1;
					overflow-y: auto;
					-webkit-overflow-scrolling: touch;
					padding: var(--major-padding);
				}
			`]}render(){const{micropub:e,media:t,mediatoken:n,mediafirehose:r,defaultctype:o,originalUrl:i,entry:a,entryIsNew:s,entryIsModified:l,cats:c}=this;return ie`
			<header class="bar header-bar inverted">
				<button @click=${e=>this.close()} class="icon-button">${Ie(Re.close)}</button>
				<slot name="title"><h1>micro-panel editor</h1></slot>
				${i?ie`
					<button @click=${e=>this.deleteEntry()}>Delete</button>
				`:""}
				${s?ie`
					<button @click=${e=>this.createEntry()} ?disabled=${!l}>Create</button>
				`:ie`
					<button @click=${e=>this.updateEntry()} ?disabled=${!l}>Save</button>
				`}
			</header>

			<micro-panel-editor-entry id="root-editor" class="root-editor"
				.media=${t} .mediatoken=${n} .mediafirehose=${r} .cats=${c} .defaultctype=${o}
				.entry=${a} .entryIsNew=${s}
				.setEntry=${e=>{this.entry=e,this.entryIsModified=!0}}></micro-panel-editor-entry>

		`}async close(){this.entryIsModified&&!confirm("Abandon current modified entry?")||("animate"in this&&"Animation"in window&&"finished"in Animation.prototype&&await this.animate({transform:["none","translateY(100vh)"]},{duration:300,easing:"ease-out"}).finished,this.hidden=!0,document.body.style.overflow=this.oldBodyOverflow)}show(){this.oldBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this.hidden=!1,"animate"in this&&this.animate({transform:["translateY(100vh)","none"]},{duration:300,easing:"ease-out"})}async editEntry(e){var t,n;this.entry=await(await(t=this.micropub,n=`q=source&url=${encodeURIComponent(e)}`,fetch(-1===t.indexOf("?")?t+"?"+n:t+"&"+n,{credentials:"include",headers:{Accept:"application/json"}}))).json(),this.entry.properties||(this.entry.properties={});for(const e of Object.keys(this.entry.properties))this.entry.properties[e]||(this.entry.properties[e]=[]);this.entry.properties.url||(this.entry.properties.url=[]),this.entry.properties.url.length<1&&this.entry.properties.url.push(e),this.originalUrl=this.entry.properties.url[0],this.entryIsNew=!1,this.entryIsModified=!1,this.show()}newEntry(e={name:[],content:[{[this.defaultctype||"html"]:""}],category:[],photo:[],location:[]}){this.entry={type:["h-entry"],properties:e},this.originalUrl=void 0,this.entryIsNew=!0,this.entryIsModified=!1,this.show()}newReaction(e,t,n){this.newEntry({[e]:[t],content:[{[this.defaultctype]:n||""}],photo:[]}),this.entryIsModified=!0}createEntry(){this._post({type:this.entry.type,properties:this.entry.properties})}updateEntry(){const e=this.originalUrl||((this.entry.properties||{}).url||[null])[0];if(!e)return alert("Somehow, an entry with no URL! I have no idea how to save that.");this._post({action:"update",url:e,replace:this.entry.properties,delete:this.entry["x-micro-panel-deleted-properties"]||[]})}deleteEntry(){if(!this.originalUrl)return alert("Somehow, an entry with no URL! I have no idea how to delete that.");confirm("Delete this entry?")&&this._post({action:"delete",url:this.originalUrl})}async _post(e){let t;this.requestInFlight=!0;try{t=await function(e,t,n,r){const o={Accept:"application/json","Content-Type":"application/json"};return n&&r&&(o[n]=r),fetch(e,{method:"post",credentials:"include",headers:o,body:JSON.stringify(t)})}(this.micropub,e,this.getAttribute("csrfheader"),this.getAttribute("csrftoken"))}catch(e){return void alert(`Couldn't save the entry! Got error: ${e}`)}finally{this.requestInFlight=!1}t.status>=300?alert(`Couldn't save the entry! Got status: ${t.status}`):(this.entryIsModified=!1,this.close(),location.href=t.headers.has("Location")?t.headers.get("Location"):this.entry.properties.url[0])}});customElements.define("micro-panel-toolbar",class extends Le{static get properties(){return{}}static get styles(){return[Me,Ne`
				:host {
					display: block;
				}
			`]}render(){return ie`
			<header class="bar header-bar inverted">
				<slot name="title"><h1>micro-panel</h1></slot>
				<button @click=${e=>je().editEntry(location.href)}>${Ie(Re.leadPencil)} Edit</button>
				<button @click=${e=>je().newEntry()}>${Ie(Re.plus)} New</button>
			</header>
		`}});function on(e){switch(e){case"like":return"like-of";case"repost":return"repost-of";case"bookmark":return"bookmark-of";case"quotation":return"quotation-of";case"tag":return"tag-of";default:return"in-reply-to"}}customElements.define("micro-panel-action",class extends HTMLElement{connectedCallback(){for(const e of this.querySelectorAll("a, button"))e.addEventListener("click",e=>je().editEntry(this.getAttribute("with")))}});customElements.define("indie-action",class extends HTMLElement{connectedCallback(){for(const e of this.querySelectorAll("a, button"))e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),je().newReaction(on(this.getAttribute("do")),this.getAttribute("with"))})}})}();
//# sourceMappingURL=micro-panel-all.bundle.min.js.map
